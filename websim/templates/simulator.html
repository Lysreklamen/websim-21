<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>UKA21 WebSim</title>
    <meta name='viewport'
        content='width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no' />
    <link href="static/css/bootstrap.min.css" rel="stylesheet">
    <style>
html, body { height:100%; }
header { position:fixed; width:100%; top:0;padding:1rem 0; }
#content { padding: 60px 0; height: 100%; width: 100%; }
footer { position:fixed; width:100%; bottom:0; line-height:3rem; }
header,
footer,
nav li {
    background-color: #fff;    
}
nav li { display:inline; text-transform:uppercase; } 
li { margin-right:2rem; }
    </style>
</head>

<body>
    <header>
        <nav>
            <ul id="menu-main">
                <li><a href="#">header1</a></li>
                <li><a href="#">header2</a></li>
                <li><a href="#">header3</a></li>
            </ul>
        </nav>
    </header>
    <div id="content">
        <canvas id="application" style="height: 100%; width: 100%;"></canvas>
    </div>
    <footer>
        <nav>
            <ul id="menu-footer">
                <li><a href="#">footer1</a></li>
                <li><a href="#">footer2</a></li>
                <li><a href="#">footer3</a></li>
            </ul>
        </nav>
    </footer>


    <script type="module">
        import { init, loadSign, pushFrame } from './static/js/sim.js';
        import { PlayPGM } from './static/js/pgm.js';

        function startup() {
            const url = new URL(window.location.href)
            const sign_name = url.searchParams.get("sign");
            if (sign_name == null) {
                alert("Sign name not provided!")
                return;
            }
            const api_base = "api/signs/" + sign_name;

            // create a PlayCanvas application
            const canvas = document.getElementById('application');
            init(canvas);
            loadSign(api_base);

            function htmlToElement(html) {
                var template = document.createElement('template');
                html = html.trim(); // Never return a text node of whitespace as the result
                template.innerHTML = html;
                return template.content.firstChild;
            }

            // fetch(api_base + "/pgms.json").then(response => response.json()).then(data => {
            //     const elem_sequences = document.getElementById("pgm-sequences");
            //     elem_sequences.innerHTML = "";

            //     for (const pgm_path of data) {
            //         const elem = htmlToElement('<li class="nav-item"><a class="nav-link pgmplay" href="#">' + pgm_path + '</a></li>');
            //         elem.addEventListener('click', event => {
            //             event.preventDefault();
            //             PlayPGM(api_base + "/pgms/" + pgm_path, pushFrame);
            //         });
            //         elem_sequences.appendChild(elem);
            //     }

            // });
        };

        startup();


    </script>
</body>

</html>